#include <iostream>
#include <stack>

using namespace std;

int factorial(int, stack<int>);
void printStack(int, stack<int>);

int main () {

    int num, result;
    
    cout << "Enter a number: ";
    cin >> num;
    
    stack<int> callStack;

    result = factorial(num, callStack);
    
    cout << endl << "Result: " << result << endl;

    return 0;

}

int factorial (int n, stack<int> cS) {
    //cout << n << endl;
    cS.push(n);
    printStack(n, cS);
    //cout << "Fact: " << cS.top() << endl;
    if (n <= 1) {
        //cout << n << endl;
        printStack(n, cS);
        cS.pop();
        return 1;
    }
    else {
        int x = n * factorial(n-1, cS);
        //cout << n << endl;
        //cout << "Fact: " << cS.top() << endl;
        printStack(n, cS);
        cS.pop();
        return x;
    }
}

void printStack(int n, stack<int> cS) {
    int x = cS.top();
    while (!cS.empty()) {
        cout << "Fact: " << cS.top() << endl;
        cS.pop();
    }
    for (int i = x; x > 0; x--) {
        cS.push(i);
    }
    cout << endl;
}
